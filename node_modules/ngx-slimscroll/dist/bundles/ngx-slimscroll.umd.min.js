!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Observable"),require("rxjs/Subscription"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/observable/merge"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/map")):"function"==typeof define&&define.amd?define("ngx-slimscroll",["exports","@angular/core","@angular/common","rxjs/Observable","rxjs/Subscription","rxjs/add/observable/fromEvent","rxjs/add/observable/merge","rxjs/add/operator/mergeMap","rxjs/add/operator/takeUntil","rxjs/add/operator/map"],t):t(e["ngx-slimscroll"]={},e.ng.core,e.ng.common,e.Rx,e.Rx)}(this,function(e,s,t,p,n){"use strict";function r(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,s,n=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n["return"])&&r.call(n)}finally{if(s)throw s.error}}return o}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}var i=function(e){this.type=e.type,this.y=e&&e.y?e.y:0,this.percent=e&&e.percent?e.percent:0,this.duration=e&&e.duration?e.duration:0,this.easing=e&&e.easing?e.easing:"linear"},o=new s.InjectionToken("NGX_SLIMSCROLL_DEFAULTS"),a=function(){function r(e){this.position=e&&e.position?e.position:"right",this.barBackground=e&&e.barBackground?e.barBackground:"#343a40",this.barOpacity=e&&e.barOpacity?e.barOpacity:"1",this.barWidth=e&&e.barWidth?e.barWidth:"12",this.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:"5",this.barMargin=e&&e.barMargin?e.barMargin:"1px 0",this.gridBackground=e&&e.gridBackground?e.gridBackground:"#adb5bd",this.gridOpacity=e&&e.gridOpacity?e.gridOpacity:"1",this.gridWidth=e&&e.gridWidth?e.gridWidth:"8",this.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:"10",this.gridMargin=e&&e.gridMargin?e.gridMargin:"1px 2px",this.alwaysVisible=!e||"undefined"==typeof e.alwaysVisible||e.alwaysVisible,this.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:1e3}return r.prototype.merge=function(e){var t=new r;return t.position=e&&e.position?e.position:this.position,t.barBackground=e&&e.barBackground?e.barBackground:this.barBackground,t.barOpacity=e&&e.barOpacity?e.barOpacity:this.barOpacity,t.barWidth=e&&e.barWidth?e.barWidth:this.barWidth,t.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:this.barBorderRadius,t.barMargin=e&&e.barMargin?e.barMargin:this.barMargin,t.gridBackground=e&&e.gridBackground?e.gridBackground:this.gridBackground,t.gridOpacity=e&&e.gridOpacity?e.gridOpacity:this.gridBackground,t.gridWidth=e&&e.gridWidth?e.gridWidth:this.gridWidth,t.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:this.gridBorderRadius,t.gridMargin=e&&e.gridMargin?e.gridMargin:this.gridMargin,t.alwaysVisible=e&&"undefined"!=typeof e.alwaysVisible?e.alwaysVisible:this.alwaysVisible,t.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:this.visibleTimeout,t},r}(),g=function(e){this.scrollPosition=e&&e.scrollPosition?e.scrollPosition:0,this.isScrollAtStart=!e||"undefined"==typeof e.isScrollAtStart||e.isScrollAtStart,this.isScrollAtEnd=!(!e||"undefined"==typeof e.isScrollAtEnd)&&e.isScrollAtEnd},m={linear:function(e){return e},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},l=function(){function e(e,t,r,i){var u=this;this.viewContainer=e,this.renderer=t,this.document=r,this.optionsDefaults=i,this.scrollChanged=new s.EventEmitter,this.interactionSubscriptions=new n.Subscription,this.initWheel=function(){var e=p.Observable.fromEvent(u.el,"DOMMouseScroll"),t=p.Observable.fromEvent(u.el,"mousewheel"),r=p.Observable.merge.apply(p.Observable,c([e,t])).subscribe(function(e){var t=0;e.wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3),u.scrollContent(t,!0,!1),e.preventDefault&&e.preventDefault()});u.interactionSubscriptions.add(r)},this.initDrag=function(){var t=u.bar,r=p.Observable.fromEvent(u.document.documentElement,"mousemove"),i=p.Observable.fromEvent(u.document.documentElement,"touchmove"),e=p.Observable.fromEvent(t,"mousedown"),s=p.Observable.fromEvent(u.el,"touchstart"),n=p.Observable.fromEvent(u.document.documentElement,"mouseup"),o=p.Observable.fromEvent(u.document.documentElement,"touchend"),a=e.mergeMap(function(e){return u.pageY=e.pageY,u.top=parseFloat(getComputedStyle(t).top),r.map(function(e){return e.preventDefault(),u.top+e.pageY-u.pageY}).takeUntil(n)}),l=s.mergeMap(function(e){return u.pageY=e.targetTouches[0].pageY,u.top=-parseFloat(getComputedStyle(t).top),i.map(function(e){return-(u.top+e.targetTouches[0].pageY-u.pageY)}).takeUntil(o)}),d=p.Observable.merge.apply(p.Observable,c([a,l])).subscribe(function(e){u.body.addEventListener("selectstart",u.preventDefaultEvent,!1),u.renderer.setStyle(u.body,"touch-action","pan-y"),u.renderer.setStyle(u.body,"user-select","none"),u.renderer.setStyle(u.bar,"top",e+"px");var t=u.scrollContent(0,!0,!1),r=u.el.offsetHeight-u.bar.offsetHeight;t&&t<0&&-t<=r?u.renderer.setStyle(u.el,"paddingTop",-t+"px"):t&&0<t&&t<=r&&u.renderer.setStyle(u.el,"paddingBottom",t+"px")}),h=p.Observable.merge.apply(p.Observable,c([n,o])).subscribe(function(){u.body.removeEventListener("selectstart",u.preventDefaultEvent,!1);var e=parseInt(u.el.style.paddingTop,10),t=parseInt(u.el.style.paddingBottom,10);u.renderer.setStyle(u.body,"touch-action","unset"),u.renderer.setStyle(u.body,"user-select","default"),0<e?u.scrollTo(0,300,"linear"):0<t&&u.scrollTo(0,300,"linear")});u.interactionSubscriptions.add(d),u.interactionSubscriptions.add(h)},this.preventDefaultEvent=function(e){e.preventDefault(),e.stopPropagation()},this.viewContainer=e,this.el=e.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return e.prototype.ngOnInit=function(){var t=this;if(this.optionsDefaults?this.options=new a(this.optionsDefaults).merge(this.options):this.options=new a(this.options),this.setStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver=new MutationObserver(function(){t.mutationThrottleTimeout&&(clearTimeout(t.mutationThrottleTimeout),t.mutationThrottleTimeout=setTimeout(t.onMutation.bind(t),50))}),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof s.EventEmitter){var e=this.scrollEvents.subscribe(function(e){return t.handleEvent(e)});this.interactionSubscriptions.add(e)}},e.prototype.ngOnDestroy=function(){this.interactionSubscriptions.unsubscribe()},e.prototype.handleEvent=function(e){if("scrollToBottom"===e.type){var t=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(t,e.duration,e.easing)}else if("scrollToTop"===e.type){t=0;this.scrollTo(t,e.duration,e.easing)}else if("scrollToPercent"===e.type&&0<=e.percent&&e.percent<=100){t=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*e.percent);this.scrollTo(t,e.duration,e.easing)}else if("scrollTo"===e.type){(t=e.y)<=this.el.scrollHeight-this.el.clientHeight&&0<=t&&this.scrollTo(t,e.duration,e.easing)}else"recalculate"===e.type&&this.getBarHeight()},e.prototype.setStyle=function(){var e=this.el;this.renderer.setStyle(e,"overflow","hidden"),this.renderer.setStyle(e,"position","relative"),this.renderer.setStyle(e,"display","block")},e.prototype.onMutation=function(){this.getBarHeight()},e.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement("div");var e=this.wrapper,t=this.el;this.renderer.addClass(e,"slimscroll-wrapper"),this.renderer.setStyle(e,"position","relative"),this.renderer.setStyle(e,"overflow","hidden"),this.renderer.setStyle(e,"display","inline-block"),this.renderer.setStyle(e,"margin",getComputedStyle(t).margin),this.renderer.setStyle(e,"width","100%"),this.renderer.setStyle(e,"height",getComputedStyle(t).height),this.renderer.insertBefore(t.parentNode,e,t),this.renderer.appendChild(e,t)},e.prototype.initGrid=function(){this.grid=this.renderer.createElement("div");var e=this.grid;this.renderer.addClass(e,"slimscroll-grid"),this.renderer.setStyle(e,"position","absolute"),this.renderer.setStyle(e,"top","0"),this.renderer.setStyle(e,"bottom","0"),this.renderer.setStyle(e,this.options.position,"0"),this.renderer.setStyle(e,"width",this.options.gridWidth+"px"),this.renderer.setStyle(e,"background",this.options.gridBackground),this.renderer.setStyle(e,"opacity",this.options.gridOpacity),this.renderer.setStyle(e,"display","block"),this.renderer.setStyle(e,"cursor","pointer"),this.renderer.setStyle(e,"z-index","99"),this.renderer.setStyle(e,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setStyle(e,"margin",this.options.gridMargin),this.renderer.appendChild(this.wrapper,e)},e.prototype.initBar=function(){this.bar=this.renderer.createElement("div");var e=this.bar;this.renderer.addClass(e,"slimscroll-bar"),this.renderer.setStyle(e,"position","absolute"),this.renderer.setStyle(e,"top","0"),this.renderer.setStyle(e,this.options.position,"0"),this.renderer.setStyle(e,"width",this.options.barWidth+"px"),this.renderer.setStyle(e,"background",this.options.barBackground),this.renderer.setStyle(e,"opacity",this.options.barOpacity),this.renderer.setStyle(e,"display","block"),this.renderer.setStyle(e,"cursor","pointer"),this.renderer.setStyle(e,"z-index","100"),this.renderer.setStyle(e,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setStyle(e,"margin",this.options.barMargin),this.renderer.appendChild(this.wrapper,e)},e.prototype.getBarHeight=function(){var e=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30)+"px",t=parseInt(e,10)===this.el.offsetHeight?"none":"block";this.renderer.setStyle(this.bar,"height",e),this.renderer.setStyle(this.bar,"display",t),this.renderer.setStyle(this.grid,"display",t)},e.prototype.scrollTo=function(a,l,d){var h=this,u=Date.now(),p=this.el.scrollTop,c=(this.el.offsetHeight,this.bar.offsetHeight,this.el.scrollHeight-this.el.clientHeight),g=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),b=parseInt(this.el.style.paddingTop,10)||0,y=parseInt(this.el.style.paddingBottom,10)||0,f=function(e){var t=Date.now(),r=Math.min(1,(t-u)/l),i=m[d](r);if(0<b||0<y){var s=null;0<b&&(s=-(i*(a-(s=-b))+s),h.renderer.setStyle(h.el,"paddingTop",s+"px")),0<y&&(s=i*(a-(s=y))+s,h.renderer.setStyle(h.el,"paddingBottom",s+"px"))}else h.el.scrollTop=i*(a-p)+p;var n=h.el.scrollTop/c;if(0===y){var o=Math.round(Math.round(h.el.clientHeight*n)-g);0<o&&h.renderer.setStyle(h.bar,"top",o+"px")}r<1&&requestAnimationFrame(f)};requestAnimationFrame(f)},e.prototype.scrollContent=function(e,t,r){var i=this,s=e,n=this.el.offsetHeight-this.bar.offsetHeight,o=this.el.scrollHeight-this.el.offsetHeight,a=null;t&&(((s=parseInt(getComputedStyle(this.bar).top,10)+20*e/100*this.bar.offsetHeight)<0||n<s)&&(a=n<s?s-n:s),s=Math.min(Math.max(s,0),n),s=0<e?Math.ceil(s):Math.floor(s),this.renderer.setStyle(this.bar,"top",s+"px")),s=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight)*o,this.el.scrollTop=s,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout(function(){i.hideBarAndGrid()},this.options.visibleTimeout));var l=0===s,d=s===o,h=Math.ceil(s),u=new g({scrollPosition:h,isScrollAtStart:l,isScrollAtEnd:d});return this.scrollChanged.emit(u),a},e.prototype.showBarAndGrid=function(){this.renderer.setStyle(this.grid,"background",this.options.gridBackground),this.renderer.setStyle(this.bar,"background",this.options.barBackground)},e.prototype.hideBarAndGrid=function(){this.renderer.setStyle(this.grid,"background","transparent"),this.renderer.setStyle(this.bar,"background","transparent")},e.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var e=this.el.parentElement,t=this.el.querySelector(".slimscroll-bar");this.el.removeChild(t),this.unwrap(e)}},e.prototype.unwrap=function(e){for(var t=document.createDocumentFragment();e.firstChild;){var r=e.removeChild(e.firstChild);t.appendChild(r)}e.parentNode.replaceChild(t,e)},e.prototype.onResize=function(e){this.getBarHeight()},e}();l.decorators=[{type:s.Directive,args:[{selector:"[slimScroll]",exportAs:"slimScroll"}]}],l.ctorParameters=function(){return[{type:s.ViewContainerRef,decorators:[{type:s.Inject,args:[s.ViewContainerRef]}]},{type:s.Renderer2,decorators:[{type:s.Inject,args:[s.Renderer2]}]},{type:undefined,decorators:[{type:s.Inject,args:[t.DOCUMENT]}]},{type:undefined,decorators:[{type:s.Inject,args:[o]},{type:s.Optional}]}]},l.propDecorators={options:[{type:s.Input}],scrollEvents:[{type:s.Input}],scrollChanged:[{type:s.Output,args:["scrollChanged"]}],onResize:[{type:s.HostListener,args:["window:resize",["$event"]]}]};var d=function(){};d.decorators=[{type:s.NgModule,args:[{declarations:[l],exports:[l]}]}],e.SlimScrollEvent=i,e.SLIMSCROLL_DEFAULTS=o,e.SlimScrollOptions=a,e.NgSlimScrollModule=d,e.ɵa=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map
