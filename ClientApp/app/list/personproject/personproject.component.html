<div class="main-content" style="margin-top:30px;">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4">
                <div class="card card-stats">
                    <div class="card-header" data-background-color="red">
                        <i class="material-icons">equalizer</i>
                    </div>
                    <div class="card-content" style="padding: 0;">
                        <div class="form-group">
                            <input style="width: 30%; margin-left: 70%;" placeholder="Tìm kiếm..." type="text" class="form-control" name="searchDuAn"
                                [(ngModel)]="obj_search_duan.nameProject" (keydown)="searchDuAn($event)">
                        </div>
                    </div>
                    <div class="card-footer">
                        <ngx-datatable class="material" [rows]="list_data_duan" [columnMode]="'force'" [headerHeight]="40" [footerHeight]="40" [rowHeight]="40"
                            [limit]="5" style="width:100%">
                            <ngx-datatable-column name="STT" sortable="true" [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                    {{rowIndex + 1}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Mã dự án" sortable="true" prop="codeProject" [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                    <style>
                                        p.tenduan:hover {
                                            cursor: pointer;
                                        }
                                    </style>
                                    <p (click)="loadNvDuAn(row)" class="tenduan">{{value}}</p>
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Tên dự án" sortable="true" prop="nameProject" [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                    <style>
                                        p.tenduan:hover {
                                            cursor: pointer;
                                        }
                                    </style>
                                    <p (click)="loadNvDuAn(row)" class="tenduan">{{value}}</p>
                                </ng-template>
                            </ngx-datatable-column>
                        </ngx-datatable>
                    </div>
                </div>
            </div>
            <div class="col-md-8" [ngStyle]="{display: is_show_product ? 'block' : 'none' }">

                <div class="card card-stats">
                    <div _ngcontent-c2="" class="card-header" data-background-color="blue" style="background: #3396da !important;">
                        <i _ngcontent-c2="" class="material-icons">assignment_ind</i>
                    </div>
                    <br>
                    <span class="text-center" style="font-weight:700">{{tenduan}}</span>
                    <div class="card-content" style="padding: 0;">
                        <div class="form-group">
                            <input style="width: 30%; margin-left: 70%;" placeholder="Tìm kiếm..." type="text" class="form-control" name="search" [(ngModel)]="obj_search.usersName"
                                (keydown)="search($event)">
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="row" style="padding: 0px 25px;">
                            <button class="btn btn-sm btn-primary" (click)="addData()">
                                <i class="material-icons">add</i>
                            </button>
                        </div>
                        <ngx-datatable class="material" [rows]="list_data" [columnMode]="'force'" [headerHeight]="40" [footerHeight]="40" [rowHeight]="40"
                            [limit]="5" style="width:100%">
                            <ngx-datatable-column name="STT" sortable="true" [width]="15">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                    {{rowIndex + 1}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Mã dự án" sortable="true" prop="projectCode" [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                    {{value}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Tên dự án" sortable="true" prop="projectName"  [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                    {{value}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Người tham gia" sortable="true" prop="memberName"  [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                    {{value}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column name="Hành động" sortable="true" prop="id" [width]="25">
                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                    {{column.name}}
                                </ng-template>
                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                    <span style="color:rgb(107, 107, 107);font-size: 14px;">
                                        <i class="material-icons md-18" style="margin-right: 10px;" (click)="editData(row)">create</i>
                                        <i class="material-icons md-18" (click)="deleteRow(row)">clear</i>
                                    </span>
                                </ng-template>
                            </ngx-datatable-column>
                        </ngx-datatable>

                        <!-- Modal Add EDIT -->
                        <bs-modal #modal1 [backdrop]="'static'" [keyboard]="false">
                            <form #modalForm="ngForm" (ngSubmit)="saveData()">
                                <bs-modal-header>
                                    <h4 class="modal-title" *ngIf="state_type === 'new'">Thêm mới người cho dự án</h4>
                                    <h4 class="modal-title" *ngIf="state_type === 'edit'">Sửa dự án</h4>
                                </bs-modal-header>
                                <bs-modal-body>
                                    <div class="row" *ngIf="state_type === 'new'">
                                        <div class="col-sm-12">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Người tham gia dự án</label>
                                                    <input class="form-control" name="searchNguoiDuAn" [(ngModel)]="obj_search_user.fullName" (keydown)="searchNguoiDuAn($event)"
                                                    />
                                                </div>
                                                <div class="card-footer">
                                                    <ngx-datatable class="material" [rows]="list_users" [columnMode]="'force'" [headerHeight]="40" [rowHeight]="40" [limit]="5"
                                                        style="width:100%">

                                                        <ngx-datatable-column name="STT" sortable="true" [width]="20">
                                                            <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                {{column.name}}
                                                            </ng-template>
                                                            <ng-template let-row="row" let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                                                {{rowIndex + 1}}
                                                            </ng-template>
                                                        </ngx-datatable-column>

                                                        <ngx-datatable-column name="Tên Nhân Viên" sortable="true" prop="fullName"  [width]="30">
                                                            <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                {{column.name}}
                                                            </ng-template>
                                                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                                                <style>
                                                                    p.infoId:hover {
                                                                        cursor: pointer;
                                                                    }
                                                                </style>
                                                                <p (click)="loadInfoUser(row)" class="infoId">{{value}}</p>
                                                            </ng-template>
                                                        </ngx-datatable-column>
                                                        <style></style>
                                                    </ngx-datatable>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <div class="card-footer">
                                                        <p>Nhân viên được chọn</p>
                                                        <ngx-datatable class="material" [rows]="listNcDuocChon" [columnMode]="'force'" [headerHeight]="40" [footerHeight]="60" [rowHeight]="40"
                                                            [limit]="5" style="width:100%">
                                                            <ngx-datatable-column name="STT" sortable="true" >
                                                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                    {{column.name}}
                                                                </ng-template>
                                                                <ng-template let-row="row" let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                                                    {{rowIndex + 1}}
                                                                </ng-template>
                                                            </ngx-datatable-column>

                                                            <ngx-datatable-column name="Nhân Viên Được Chọn" sortable="true" prop="fullName"  >
                                                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                    {{column.name}}
                                                                </ng-template>
                                                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>

                                                                    <p class="">{{value}}
                                                                        <style>
                                                                            i.material-icons:hover {
                                                                                cursor: pointer;
                                                                            }
                                                                        </style>
                                                                        <i class="material-icons" (click)="delteleInfoUser(row)" style="float:right">
                                                                            delete
                                                                        </i>
                                                                    </p>
                                                                </ng-template>
                                                            </ngx-datatable-column>
                                                            <style></style>
                                                        </ngx-datatable>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" *ngIf="state_type === 'edit'">
                                        <div class="col-sm-12">
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <label class="control-label">Thay Người Cho Dự Án</label>
                                                    <input class="form-control" name="searchNguoiDuAn" [(ngModel)]="obj_edit.memberName" (keydown)="searchNguoiDuAn($event)"
                                                    />
                                                </div>
                                                <div class="card-footer">
                                                    <ngx-datatable class="material" [rows]="list_users" [columnMode]="'force'" [headerHeight]="40" [rowHeight]="40" [limit]="5"
                                                        style="width:100%">

                                                        <ngx-datatable-column name="STT" sortable="true"  [width]="20">
                                                            <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                {{column.name}}
                                                            </ng-template>
                                                            <ng-template let-row="row" let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                                                {{rowIndex + 1}}
                                                            </ng-template>
                                                        </ngx-datatable-column>

                                                        <ngx-datatable-column name="Nhân Viên" sortable="true" prop="fullName"  [width]="30">
                                                            <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                {{column.name}}
                                                            </ng-template>
                                                            <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                                                                <style>
                                                                    p.infoId:hover {
                                                                        cursor: pointer;
                                                                    }
                                                                </style>
                                                                <p (click)="updateInfoUser(row)" class="infoId">{{value}}</p>
                                                            </ng-template>
                                                        </ngx-datatable-column>
                                                        <style></style>
                                                    </ngx-datatable>
                                                </div>
                                            </div>
                                            <div class="col-sm-6">
                                                <div class="form-group">
                                                    <div class="card-footer">
                                                        <p>Nhân viên thay thế</p>
                                                        <ngx-datatable class="material" [rows]="listNcThayThe" [columnMode]="'force'" [headerHeight]="40" [footerHeight]="60" [rowHeight]="40"
                                                            [limit]="5" style="width:100%">
                                                            <ngx-datatable-column name="STT" sortable="true">
                                                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                    {{column.name}}
                                                                </ng-template>
                                                                <ng-template let-row="row" let-value="value" let-rowIndex="rowIndex" ngx-datatable-cell-template>
                                                                    {{rowIndex + 1}}
                                                                </ng-template>
                                                            </ngx-datatable-column>

                                                            <ngx-datatable-column name="Nhân Viên Thay Thế" sortable="true" prop="fullName">
                                                                <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
                                                                    {{column.name}}
                                                                </ng-template>
                                                                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>

                                                                    <p class="">{{value}}
                                                                        <style>
                                                                            i.material-icons:hover {
                                                                                cursor: pointer;
                                                                            }
                                                                        </style>
                                                                        <i class="material-icons" (click)="delteleRowUser(row)" style="float:right">
                                                                            delete
                                                                        </i>
                                                                    </p>
                                                                </ng-template>
                                                            </ngx-datatable-column>
                                                            <style></style>
                                                        </ngx-datatable>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <style>
                                        .label-control {
                                            margin-top: 8px;
                                        }
                                    </style>
                                </bs-modal-body>
                                <bs-modal-footer>
                                    <button type="button" class="btn btn-default" (click)="cancelSave()" style="margin-bottom:0;">Hủy
                                        bỏ
                                    </button>
                                    <button type="submit" class="btn btn-primary">Đồng ý</button>
                                </bs-modal-footer>
                            </form>
                        </bs-modal>

                        <!-- Modal Confirm Delete -->
                        <bs-modal #confirmdeletemodal [backdrop]="'static'" [keyboard]="false">
                            <bs-modal-body>
                                <div class="container" style="padding: 10px 25px;width:100%;">
                                    Xác nhận xóa
                                </div>
                            </bs-modal-body>
                            <bs-modal-footer>
                                <div style="padding-right:40px;">
                                    <button type="button" class="btn btn-default-2" (click)="confirmdeletemodal.close()" style="margin-bottom:0;margin-right:10px;">Hủy
                                        bỏ
                                    </button>
                                    <button type="button" (click)="removeOK()" class="btn btn-primary">
                                        Đồng ý </button>
                                </div>
                            </bs-modal-footer>
                        </bs-modal>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>